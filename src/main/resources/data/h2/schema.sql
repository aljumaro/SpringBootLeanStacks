DROP TABLE GREETING IF EXISTS;
DROP TABLE ACCOUNT IF EXISTS;
DROP TABLE ROLE IF EXISTS;
DROP TABLE ACCOUNTROLE IF EXISTS;

CREATE TABLE GREETING (
ID BIGINT(10) NOT NULL AUTO_INCREMENT,
TEXT VARCHAR2(255) DEFAULT NOT NULL,
PRIMARY KEY (ID));

CREATE TABLE ACCOUNT (
  ID BIGINT(10) NOT NULL AUTO_INCREMENT,
  USERNAME VARCHAR2(100) NOT NULL,
  PASSWORD VARCHAR2(100) NOT NULL,
  ENABLED BOOLEAN DEFAULT TRUE NOT NULL,
  CREDENTIALS_EXPIRED BOOLEAN DEFAULT FALSE NOT NULL,
  EXPIRED BOOLEAN DEFAULT FALSE NOT NULL,
  LOCKED BOOLEAN DEFAULT FALSE NOT NULL,
  PRIMARY KEY (ID),
  CONSTRAINT UQ_ACCOUNT_USERNAME UNIQUE (USERNAME)
);

CREATE TABLE ROLE (
  ID BIGINT(10) NOT NULL,
  CODE VARCHAR2(50) NOT NULL,
  LABEL VARCHAR2(50) NOT NULL,
  PRIMARY KEY (ID),
  CONSTRAINT UQ_ROLE_CODE UNIQUE (CODE)
);

CREATE TABLE ACCOUNT_ROLE (
  ACCOUNT_ID BIGINT(10) NOT NULL,
  ROLE_ID BIGINT(10) NOT NULL,
  PRIMARY KEY (ACCOUNT_ID, ROLE_ID),
  CONSTRAINT FK_ACCOUNT_ROLE_ACCOUNTID FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ID),
  CONSTRAINT FK_ACCOUNT_ROLE_ROLEID FOREIGN KEY (ROLE_ID) REFERENCES ROLE (ID)
);